<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.library.basic.usr.review.ReviewMapper">
	
	<!-- 리뷰 목록 -->
	<select id="reviewList" resultType="ReviewVO" parameterType="map">
	
		SELECT
		rev_code,
		usr_id,
		book_bno,
		rev_title,
		rev_content,
		rev_rate,
		rev_date
		FROM
		(
		SELECT /*+ INDEX_DESC(review_table PK_REVIEW_CODE) */
		ROWNUM AS
		RN,
		rev_code,
		usr_id,
		book_bno,
		rev_title,
		rev_content,
		rev_rate,
		rev_date
		FROM
		review_table
		WHERE
		book_bno = ${book_bno}
		WHERE
		RN > (#{cri.pageNum} - 1 ) * #{cri.amount}
	
	
	</select>
	
	<!-- 리뷰 개수  -->
	<select id="getCountReviewByBookBno" resultType="int" parameterType="int">
	
		SELECT
		COUNT(*)
		FROM
		review_table
		WHERE
		book_bno = #{book_bno}
	
	</select>
	

</mapper>